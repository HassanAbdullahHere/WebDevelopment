<%- include('layout/header') -%>

<% if(typeof cart !== 'undefined'){ %>
    <h1>Cart</h1>
    <br>
    <table class="table table-striped alignmiddle">
        <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Price</th>
            <th>Quantity</th>
            <th></th>
            <th>SubTotal</th>
        </tr>
        <% var total = 0 %>
        <% cart.forEach(function(product){ %>
            
            <% var sub = parseFloat(product.qty * product.price).toFixed(2)%>
            <% total+= +sub%>

            <tr>
                <td><img class="cpi" src="<%= product.image%>" alt=""></td>
                <td><%=product.title%></td>
                <td><%=product.price%></td>
                <td><%=product.qty%></td>
                <td>
                    <a href="/cart/update/<%= product.title%>?action=add">+</a>&nbsp;
                    <a href="/cart/update/<%= product.title%>?action=remove">-</a>&nbsp;
                    <a href="/cart/update/<%= product.title%>?action=clear">Clear</a>&nbsp;
                </td>
                <td><%= sub%></td>
            </tr>
            
                    
        <% }); %>
        <tr>
            <td colspan="6" align="right"><b>Total: $<%=parseFloat(total).toFixed(2)%></b></td>
        </tr>
        <tr>
            <td colspan="5" align="right">
                <a href="/cart/clear" class="clearcart btn btn-danger">Clear Cart</a>
            </td>
            <td colspan="5" align="right">
                <a href="/" class="btn btn-primary buynow">Buy Now</a>
            </td>
        </tr>

    </table>
<%} else{%> 
<h3 class="text-center"> Your cart is Empty.</h3>
<% } %>


<%- include('layout/footer'); -%>

<style>
    /* Add your custom CSS styles here */
  
    h1 {
      color: #712cf9;
      font-size: 24px;
      margin-bottom: 20px;
    }
  
    .table {
      width: 100%;
    }
  
    .table th {
      background-color: #f8f9fa;
      color: #333;
      font-weight: bold;
    }
  
    .table td {
      padding: 10px;
    }
  
    .cpi {
      max-width: 100px;
      height: auto;
    }
  
    .clearcart {
      margin-right: 10px;
    }
  
    .buynow {
      font-weight: bold;
    }
  
    .text-center {
      text-align: center;
    }
  </style>